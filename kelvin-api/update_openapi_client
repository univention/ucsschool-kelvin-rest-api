#!/usr/bin/env sh
MACHINE_USER="$(hostname)\$"
MACHINE_PASSWORD="$(cat /etc/machine.secret)"

echo "Building OpenAPI client library using host ${DOCKER_HOST_NAME}..."
update_openapi_client \
  --generator java \
  --jar /kelvin/openapi-generator/jar/openapi-generator-cli-*.jar \
  --insecure \
  --username "$MACHINE_USER" \
  --password "$MACHINE_PASSWORD" \
  "$DOCKER_HOST_NAME"
echo "Finished building OpenAPI client library."
