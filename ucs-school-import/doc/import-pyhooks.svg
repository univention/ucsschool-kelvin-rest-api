<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2079px" preserveAspectRatio="none" style="width:867px;height:2079px;" version="1.1" viewBox="0 0 867 2079" width="867px" zoomAndPan="magnify"><defs><filter height="300%" id="fs7ikwpywe3pl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fs7ikwpywe3pl)" height="1291.3984" style="stroke: #000000; stroke-width: 2.0;" width="776" x="28" y="557.1563"/><rect fill="#FFFFFF" height="248.7344" style="stroke: none; stroke-width: 1.0;" width="776" x="28" y="808.2188"/><rect fill="#FFFFFF" height="294.1328" style="stroke: none; stroke-width: 1.0;" width="776" x="28" y="1056.9531"/><rect fill="#FFFFFF" height="248.7344" style="stroke: none; stroke-width: 1.0;" width="776" x="28" y="1351.0859"/><rect fill="#FFFFFF" height="248.7344" style="stroke: none; stroke-width: 1.0;" width="776" x="28" y="1599.8203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="44" x2="44" y1="86.2969" y2="1992.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="162" x2="162" y1="86.2969" y2="1992.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="330" x2="330" y1="86.2969" y2="1992.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="468" x2="468" y1="86.2969" y2="1992.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="588" x2="588" y1="86.2969" y2="1992.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="706" x2="706" y1="86.2969" y2="1992.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="25" y="82.9951">User</text><ellipse cx="44" cy="13" fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44,21 L44,48 M31,29 L57,29 M44,48 L31,63 M44,48 L57,63 " fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="25" y="2004.0811">User</text><ellipse cx="44" cy="2017.3828" fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M44,2025.3828 L44,2052.3828 M31,2033.3828 L57,2033.3828 M44,2052.3828 L31,2067.3828 M44,2052.3828 L57,2067.3828 " fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="73" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="80" y="70.9951">ucs-school-user-import</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="73" y="1991.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="161" x="80" y="2011.0811">ucs-school-user-import</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="262" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="269" y="70.9951">PostReadPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="262" y="1991.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="269" y="2011.0811">PostReadPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="409" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="416" y="70.9951">FormatPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="409" y="1991.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="416" y="2011.0811">FormatPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="537" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="544" y="70.9951">UserPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="537" y="1991.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="544" y="2011.0811">UserPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="649" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="656" y="70.9951">ResultPyHook</text><rect fill="#FEFECE" filter="url(#fs7ikwpywe3pl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="649" y="1991.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="656" y="2011.0811">ResultPyHook</text><polygon fill="#A80036" points="150.5,113.2969,160.5,117.2969,150.5,121.2969,154.5,117.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="44" x2="156.5" y1="117.2969" y2="117.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="51" y="112.3638">Start import</text><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="108,130.4297,108,155.4297,213,155.4297,213,140.4297,203,130.4297,108,130.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="203" y1="130.4297" y2="140.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="203" y1="140.4297" y2="140.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="114" y="147.4966">Load CSV file</text><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="50,169.5625,50,194.5625,271,194.5625,271,179.5625,261,169.5625,50,169.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="261" x2="261" y1="169.5625" y2="179.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271" x2="261" y1="179.5625" y2="179.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="56" y="186.6294">Trim leading/trailing whitespace</text><polygon fill="#A80036" points="318.5,205.6953,328.5,209.6953,318.5,213.6953,322.5,209.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="324.5" y1="209.6953" y2="209.6953"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="162,222.6953,162,277.6953,495,277.6953,495,232.6953,485,222.6953,162,222.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="485" y1="222.6953" y2="232.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495" x2="485" y1="232.6953" y2="232.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="168" y="239.7622">entry_read():</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="168" y="254.895">Adjust or skip data record directly after reading it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="168" y="270.0278">(lo+logger available)</text><polygon fill="#A80036" points="173.5,289.0938,163.5,293.0938,173.5,297.0938,169.5,293.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="329.5" y1="293.0938" y2="293.0938"/><polygon fill="#A80036" points="318.5,303.0938,328.5,307.0938,318.5,311.0938,322.5,307.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="324.5" y1="307.0938" y2="307.0938"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="178,320.0938,178,375.0938,479,375.0938,479,330.0938,469,320.0938,178,320.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469" x2="469" y1="320.0938" y2="330.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="479" x2="469" y1="330.0938" y2="330.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="184" y="337.1606">all_entries_read():</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="184" y="352.2935">Called after all data records have been read</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="184" y="367.4263">(lo+logger available)</text><polygon fill="#A80036" points="173.5,386.4922,163.5,390.4922,173.5,394.4922,169.5,390.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="329.5" y1="390.4922" y2="390.4922"/><polygon fill="#A80036" points="456,400.4922,466,404.4922,456,408.4922,460,404.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="462" y1="404.4922" y2="404.4922"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="326,417.4922,326,472.4922,605,472.4922,605,427.4922,595,417.4922,326,417.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="417.4922" y2="427.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="605" x2="595" y1="427.4922" y2="427.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="332" y="434.5591">patch_fields_$ROLE():</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="332" y="449.6919">Adjust fields TEMPORARILY for evaluating</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="332" y="464.8247">corresponding scheme</text><polygon fill="#A80036" points="173.5,483.8906,163.5,487.8906,173.5,491.8906,169.5,487.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="467" y1="487.8906" y2="487.8906"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="8,500.8906,8,540.8906,314,540.8906,314,510.8906,304,500.8906,8,500.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304" x2="304" y1="500.8906" y2="510.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="304" y1="510.8906" y2="510.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="14" y="517.9575">Evaluate field schemata by using data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="14" y="533.0903">from FormatPyHooks (e.g. make_username)</text><rect fill="none" height="1291.3984" style="stroke: #000000; stroke-width: 2.0;" width="776" x="28" y="557.1563"/><polygon fill="#EEEEEE" points="28,557.1563,92,557.1563,92,564.1563,82,574.1563,28,574.1563,28,557.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="43" y="570.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="107" y="569.3667">["user is about to be created"]</text><polygon fill="#A80036" points="576,576.2891,586,580.2891,576,584.2891,580,580.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="580.2891" y2="580.2891"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="401,593.2891,401,648.2891,770,648.2891,770,603.2891,760,593.2891,401,593.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="760" y1="593.2891" y2="603.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="760" y1="603.2891" y2="603.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="407" y="610.356">pre_create(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="407" y="625.4888">Adjust fields and UDM properties in &lt;user&gt; as desired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="407" y="640.6216">(lo+logger available)</text><polygon fill="#A80036" points="173.5,659.6875,163.5,663.6875,173.5,667.6875,169.5,663.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="663.6875" y2="663.6875"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="98,676.6875,98,701.6875,223,701.6875,223,686.6875,213,676.6875,98,676.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="676.6875" y2="686.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223" x2="213" y1="686.6875" y2="686.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="104" y="693.7544">Create new user</text><polygon fill="#A80036" points="576,712.8203,586,716.8203,576,720.8203,580,716.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="716.8203" y2="716.8203"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="381,729.8203,381,784.8203,790,784.8203,790,739.8203,780,729.8203,381,729.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="729.8203" y2="739.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="790" x2="780" y1="739.8203" y2="739.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="387" y="746.8872">post_create(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="387" y="762.02">Perform required manual actions in LDAP or somewhere else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="387" y="777.1528">(lo+logger available)</text><polygon fill="#A80036" points="173.5,796.2188,163.5,800.2188,173.5,804.2188,169.5,800.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="800.2188" y2="800.2188"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="804" y1="809.2188" y2="809.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="33" y="819.4292">["user is about to be modified"]</text><polygon fill="#A80036" points="576,825.0234,586,829.0234,576,833.0234,580,829.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="829.0234" y2="829.0234"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="401,842.0234,401,897.0234,770,897.0234,770,852.0234,760,842.0234,401,842.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="760" y1="842.0234" y2="852.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="760" y1="852.0234" y2="852.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="407" y="859.0903">pre_modify(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="407" y="874.2231">Adjust fields and UDM properties in &lt;user&gt; as desired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="407" y="889.356">(lo+logger available)</text><polygon fill="#A80036" points="173.5,908.4219,163.5,912.4219,173.5,916.4219,169.5,912.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="912.4219" y2="912.4219"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="87,925.4219,87,950.4219,234,950.4219,234,935.4219,224,925.4219,87,925.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="925.4219" y2="935.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="224" y1="935.4219" y2="935.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="93" y="942.4888">Modify existing user</text><polygon fill="#A80036" points="576,961.5547,586,965.5547,576,969.5547,580,965.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="965.5547" y2="965.5547"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="381,978.5547,381,1033.5547,790,1033.5547,790,988.5547,780,978.5547,381,978.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="978.5547" y2="988.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="790" x2="780" y1="988.5547" y2="988.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="387" y="995.6216">post_modify(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="387" y="1010.7544">Perform required manual actions in LDAP or somewhere else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="387" y="1025.8872">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1044.9531,163.5,1048.9531,173.5,1052.9531,169.5,1048.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1048.9531" y2="1048.9531"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="804" y1="1057.9531" y2="1057.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="377" x="33" y="1068.1636">["user is about to be deactivated and marked for purging"]</text><polygon fill="#A80036" points="576,1073.7578,586,1077.7578,576,1081.7578,580,1077.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1077.7578" y2="1077.7578"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="399,1090.7578,399,1175.7578,772,1175.7578,772,1100.7578,762,1090.7578,399,1090.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="762" x2="762" y1="1090.7578" y2="1100.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="772" x2="762" y1="1100.7578" y2="1100.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="405" y="1107.8247">pre_modify(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="405" y="1122.9575">Adjust fields and UDM properties in &lt;user&gt; as desired.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="405" y="1138.0903">This special case can be detected by checking</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="315" x="405" y="1153.2231">user.udm_properties[ucsschoolPurgeTimestamp]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="405" y="1168.356">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1187.4219,163.5,1191.4219,173.5,1195.4219,169.5,1191.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1191.4219" y2="1191.4219"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="38,1204.4219,38,1244.4219,282,1244.4219,282,1214.4219,272,1204.4219,38,1204.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272" x2="272" y1="1204.4219" y2="1214.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282" x2="272" y1="1214.4219" y2="1214.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="44" y="1221.4888">Modify existing user and mark user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="44" y="1236.6216">for deletion at specified date.</text><polygon fill="#A80036" points="576,1255.6875,586,1259.6875,576,1263.6875,580,1259.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1259.6875" y2="1259.6875"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="381,1272.6875,381,1327.6875,790,1327.6875,790,1282.6875,780,1272.6875,381,1272.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="1272.6875" y2="1282.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="790" x2="780" y1="1282.6875" y2="1282.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="387" y="1289.7544">post_modify(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="387" y="1304.8872">Perform required manual actions in LDAP or somewhere else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="387" y="1320.02">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1339.0859,163.5,1343.0859,173.5,1347.0859,169.5,1343.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1343.0859" y2="1343.0859"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="804" y1="1352.0859" y2="1352.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="301" x="33" y="1362.2964">["user is about to be moved/renamed in LDAP"]</text><polygon fill="#A80036" points="576,1367.8906,586,1371.8906,576,1375.8906,580,1371.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1371.8906" y2="1371.8906"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="401,1384.8906,401,1439.8906,770,1439.8906,770,1394.8906,760,1384.8906,401,1384.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="760" y1="1384.8906" y2="1394.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="760" y1="1394.8906" y2="1394.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="407" y="1401.9575">pre_move(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="407" y="1417.0903">Adjust fields and UDM properties in &lt;user&gt; as desired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="407" y="1432.2231">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1451.2891,163.5,1455.2891,173.5,1459.2891,169.5,1455.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1455.2891" y2="1455.2891"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="64,1468.2891,64,1493.2891,257,1493.2891,257,1478.2891,247,1468.2891,64,1468.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247" x2="247" y1="1468.2891" y2="1478.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="257" x2="247" y1="1478.2891" y2="1478.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="70" y="1485.356">Move existing user in LDAP</text><polygon fill="#A80036" points="576,1504.4219,586,1508.4219,576,1512.4219,580,1508.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1508.4219" y2="1508.4219"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="381,1521.4219,381,1576.4219,790,1576.4219,790,1531.4219,780,1521.4219,381,1521.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="1521.4219" y2="1531.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="790" x2="780" y1="1531.4219" y2="1531.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="387" y="1538.4888">post_move(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="387" y="1553.6216">Perform required manual actions in LDAP or somewhere else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="387" y="1568.7544">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1587.8203,163.5,1591.8203,173.5,1595.8203,169.5,1591.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1591.8203" y2="1591.8203"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="804" y1="1600.8203" y2="1600.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="767" x="33" y="1611.0308">["user is immediately removed from LDAP !OR! automatically removed via cron job after reaching the purgeTimestamp"]</text><polygon fill="#A80036" points="576,1616.625,586,1620.625,576,1624.625,580,1620.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1620.625" y2="1620.625"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="401,1633.625,401,1688.625,770,1688.625,770,1643.625,760,1633.625,401,1633.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="760" x2="760" y1="1633.625" y2="1643.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="760" y1="1643.625" y2="1643.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="407" y="1650.6919">pre_remove(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="407" y="1665.8247">Adjust fields and UDM properties in &lt;user&gt; as desired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="407" y="1680.9575">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1700.0234,163.5,1704.0234,173.5,1708.0234,169.5,1704.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1704.0234" y2="1704.0234"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="45,1717.0234,45,1742.0234,275,1742.0234,275,1727.0234,265,1717.0234,45,1717.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="265" x2="265" y1="1717.0234" y2="1727.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275" x2="265" y1="1727.0234" y2="1727.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="51" y="1734.0903">Remove existing user from LDAP</text><polygon fill="#A80036" points="576,1753.1563,586,1757.1563,576,1761.1563,580,1757.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="582" y1="1757.1563" y2="1757.1563"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="381,1770.1563,381,1825.1563,790,1825.1563,790,1780.1563,780,1770.1563,381,1770.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="780" x2="780" y1="1770.1563" y2="1780.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="790" x2="780" y1="1780.1563" y2="1780.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="387" y="1787.2231">post_remove(user):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="387" y="1802.356">Perform required manual actions in LDAP or somewhere else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="387" y="1817.4888">(lo+logger available)</text><polygon fill="#A80036" points="173.5,1836.5547,163.5,1840.5547,173.5,1844.5547,169.5,1840.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="587" y1="1840.5547" y2="1840.5547"/><polygon fill="#A80036" points="55,1872.5547,45,1876.5547,55,1880.5547,51,1876.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="161.5" y1="1876.5547" y2="1876.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="61" y="1871.6216">Show results</text><polygon fill="#A80036" points="694,1886.6875,704,1890.6875,694,1894.6875,698,1890.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="700" y1="1890.6875" y2="1890.6875"/><polygon fill="#FBFB77" filter="url(#fs7ikwpywe3pl)" points="553,1903.6875,553,1958.6875,855,1958.6875,855,1913.6875,845,1903.6875,553,1903.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="845" x2="845" y1="1903.6875" y2="1913.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="855" x2="845" y1="1913.6875" y2="1913.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="559" y="1920.7544">user_result(user_import):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="559" y="1935.8872">Hook has access to import results and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="559" y="1951.02">can e.g. send mails in case of import errors.</text><polygon fill="#A80036" points="173.5,1970.0859,163.5,1974.0859,173.5,1978.0859,169.5,1974.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="705" y1="1974.0859" y2="1974.0859"/><!--
@startuml
actor User
participant "ucs-school-user-import"
participant PostReadPyHook
participant FormatPyHook
participant UserPyHook
participant ResultPyHook

User -> "ucs-school-user-import": Start import
note over "ucs-school-user-import": Load CSV file

note over "ucs-school-user-import": Trim leading/trailing whitespace

"ucs-school-user-import" -> PostReadPyHook
note over PostReadPyHook: entry_read():\nAdjust or skip data record directly after reading it\n(lo+logger available)
PostReadPyHook -> "ucs-school-user-import"

"ucs-school-user-import" -> PostReadPyHook
note over PostReadPyHook: all_entries_read():\nCalled after all data records have been read\n(lo+logger available)
PostReadPyHook -> "ucs-school-user-import"

"ucs-school-user-import" -> FormatPyHook
note over FormatPyHook: patch_fields_$ROLE():\nAdjust fields TEMPORARILY for evaluating\ncorresponding scheme
FormatPyHook -> "ucs-school-user-import"

note over "ucs-school-user-import": Evaluate field schemata by using data\nfrom FormatPyHooks (e.g. make_username)

alt "user is about to be created"

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: pre_create(user):\nAdjust fields and UDM properties in <user> as desired\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

    note over "ucs-school-user-import": Create new user

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: post_create(user):\nPerform required manual actions in LDAP or somewhere else\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

else "user is about to be modified"

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: pre_modify(user):\nAdjust fields and UDM properties in <user> as desired\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

    note over "ucs-school-user-import": Modify existing user

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: post_modify(user):\nPerform required manual actions in LDAP or somewhere else\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

else "user is about to be deactivated and marked for purging"

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: pre_modify(user):\nAdjust fields and UDM properties in <user> as desired.\nThis special case can be detected by checking\nuser.udm_properties[\"ucsschoolPurgeTimestamp\"]\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

    note over "ucs-school-user-import": Modify existing user and mark user\nfor deletion at specified date.

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: post_modify(user):\nPerform required manual actions in LDAP or somewhere else\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

else "user is about to be moved/renamed in LDAP"

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: pre_move(user):\nAdjust fields and UDM properties in <user> as desired\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

    note over "ucs-school-user-import": Move existing user in LDAP

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: post_move(user):\nPerform required manual actions in LDAP or somewhere else\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

else "user is immediately removed from LDAP !OR! automatically removed via cron job after reaching the purgeTimestamp"

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: pre_remove(user):\nAdjust fields and UDM properties in <user> as desired\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

    note over "ucs-school-user-import": Remove existing user from LDAP

    "ucs-school-user-import" -> UserPyHook
    note over UserPyHook: post_remove(user):\nPerform required manual actions in LDAP or somewhere else\n(lo+logger available)
    UserPyHook -> "ucs-school-user-import"

end

"ucs-school-user-import" -> User: Show results

"ucs-school-user-import" -> ResultPyHook
note over ResultPyHook: user_result(user_import):\nHook has access to import results and\ncan e.g. send mails in case of import errors.
ResultPyHook -> "ucs-school-user-import"

@enduml

PlantUML version 1.2017.20(Mon Dec 11 17:57:05 CET 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_181-8u181-b13-1~deb9u1-b13
Operating System: Linux
OS Version: 4.16.0-0.bpo.1-amd64
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>